# ==================== 极简实用 tmux.conf（2025 推荐） ====================

# 前缀键：Ctrl + Space（最舒服的现代写法）
unbind C-b
set -g prefix C-Space
bind C-Space send-prefix

# 基础设置
set -g mouse on                     # 鼠标支持
set -sg escape-time 0               # 立刻响应 Esc（vim 用户必备）
set -g history-limit 50000          # 超大滚动缓存
set -g base-index 1                 # 窗口从 1 开始
setw -g pane-base-index 1           # pane 从 1 开始
set -g renumber-windows on          # 关掉窗口后自动重编号
set -g detach-on-destroy off        # 最后一个 shell 退出时不销毁 session

# 真彩色 + 真彩支持
set -g default-terminal "tmux-256color"
set -as terminal-overrides ',*:Tc'
set -as terminal-overrides ',*:Smulx=\E[4::%p1%dm'  # 下划线颜色支持
set -as terminal-features ',*:RGB'

# 复制模式用 vim 键位
set -g mode-keys vi
bind -T copy-mode-vi v send -X begin-selection
bind -T copy-mode-vi y send -X copy-selection-and-cancel

# ==================== 核心快捷键（你最在意的） ====================

# 分屏（保持当前路径）
bind \\ split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"

# prefix + l d u r 切换 pane（右 下 上 左）← 你最想要的！
bind l select-pane -L
bind d select-pane -D
bind u select-pane -U
bind r select-pane -R

# prefix + hjkl 也保留（兼容 vim 党）
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R   # 注意：这里 l 被覆盖了两次，最后一次生效

# 快速切换上下窗口
bind -r C-p previous-window
bind -r C-n next-window

# 全屏切换（zoom）
bind -n M-f resize-pane -Z

# ==================== 状态栏极简（几乎无美化） ====================
set -g status on
set -g status-style bg=default,fg=white
set -g status-left " #S "
set -g status-right " %Y-%m-%d %H:%M "
set -g window-status-current-style fg=cyan,bold
set -g window-status-format " #I:#W "
set -g window-status-current-format " #I:#W#{?window_zoomed_flag, 放大,} "

# pane 边框一点颜色就够了
set -g pane-border-style fg=colour244
set -g pane-active-border-style fg=cyan

# 就是这么干净

# ==================== 基本美化（2025 主流极简风） ====================

# 颜色主题（Catppuccin Mocha —— 目前最火的配色，直接硬编码，不依赖插件）
# 你可以换成 Gruvbox / Dracula / Nord 也只要改下面 6 个颜色代码就行
# 蓝紫色（Mocha）    粉紫色（Flamingo）   薄荷绿（Teal）
set -g @c_bg          "#181825"   # 状态栏背景
set -g @c_cyan        "#89b4fa"   # 高亮窗口
set -g @c_pink        "#f5c2e7"   # 前缀按下时提示
set -g @c_teal        "#94e2d5"   # 一般文字
set -g @c_gray        "#585b70"   # 不活跃窗口
set -g @c_surface     "#313244"   # pane 边框
set -g @c_left        "#cba6f7"  

# 状态栏整体
set -g status on
set -g status-style "bg=#{@c_bg},fg=#{@c_teal}"
set -g status-left-length 50
set -g status-right-length 80

# 左边：会话名 + 小图标
set -g status-left "#[fg=#{@c_bg},bg=#{@c_pink},bold] #S #[fg=#{@c_pink},bg=#{@c_bg}]█#[default] "

# 右边：日期时间 + 主机名

set -g status-right "#[fg=#{@c_teal},bg=#{@c_bg}] %Y-%m-%d  %H:%M #[fg=#{@c_pink},bg=#{@c_bg},bold] #h "

set -g status-right "#[fg=#{@c_surface},bg=#{@c_bg}]█#[fg=#{@c_teal},bg=#{@c_surface}] %Y-%m-%d #[] %H:%M #[fg=#{@c_pink},bg=#{@c_surface}]█#[fg=#{@c_bg},bg=#{@c_pink},bold] #h "

# 不活跃窗口
setw -g window-status-format "#[fg=#{@c_gray},bg=#{@c_bg}] #I:#W#{?window_zoomed_flag, zoom,} "

# 当前活动窗口（高亮）
setw -g window-status-current-format "#[fg=#{@c_bg},bg=#{@c_cyan},bold] #I:#W#{?window_zoomed_flag, zoom,} #[fg=#{@c_cyan},bg=#{@c_bg}]█"

# pane 边框
set -g pane-border-style "fg=#{@c_surface}"
set -g pane-active-border-style "fg=#{@c_cyan}"

# 当有 bell/activity 时轻微高亮
setw -g window-status-activity-style "fg=yellow,bg=#{@c_bg}"
setw -g window-status-bell-style "fg=red,bold"

# 前缀键按下时的提示（很好看的小彩条）
set -g status-left "#[fg=#{@c_bg},bg=#{@c_pink},bold] #S #[fg=#{@c_pink},bg=#{@c_bg}]█#{?client_prefix,#[fg=#{@c_bg}#[bg=red bold] PREFIX ,} "
